<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="view_req_open_balance_form_investment_fund" model="ir.ui.view">
            <field name="name">Increments and Withdrawals Fund Form View</field>
            <field eval="100" name="priority"/>
            <field name="model">request.open.balance.invest</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <button name="reject_request" type="object" string="Reject" class="oe_highlight"
                             attrs="{'invisible': [('state', '!=', 'draft')]}" context="{'from_investment':1}"/>
                        <button name="approve_investment" type="object" string="Approve" class="oe_highlight"
                             attrs="{'invisible': [('state', '!=', 'draft')]}"/>
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <group>
                            <group>
                            	<field name="is_fund" invisible="1"/>
                            	<field name="trust_id" invisible="1"/>
                            	<field name="patrimonial_id" invisible="1"/>
                            	<field name="is_manually" invisible="1"/>
								<field name="fund_id" string="Fund Name" required="1" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
								<field name="fund_key" string="Fund Code" readonly="1"/>                            	
                                <field name="name" invisible="1"/>
                                <field name="operation_number" attrs="{'readonly': [('state', '!=', 'draft')]}" required="not context.get('from_fund_view',False)" invisible="context.get('from_fund_view',False)"/>
                                <field name="agreement_number" attrs="{'readonly': [('state', '!=', 'draft')]}" required="not context.get('from_fund_view',False)" invisible="context.get('from_fund_view',False)"/>
                                <field name="type_of_operation" attrs="{'readonly': [('state', '!=', 'draft')]}" required="not context.get('from_fund_view',False)" invisible="context.get('from_fund_view',False)"/>
                                
                                <field name="fund_request_date" attrs="{'readonly': [('state', '!=', 'draft')]}" required="context.get('from_fund_view',False)" invisible="not context.get('from_fund_view',False)"/>
                                <field name="dependency_id" context="{'show_for_agreement':1}" attrs="{'readonly': [('state', '!=', 'draft')]}" required="context.get('from_fund_view',False)" invisible="not context.get('from_fund_view',False)"/>
                                <field name="subdependency_id" context="{'show_for_agreement':1}" domain="[('dependency_id','=',dependency_id)]" attrs="{'readonly': [('state', '!=', 'draft')]}" required="context.get('from_fund_view',False)" invisible="not context.get('from_fund_view',False)"/>
                                <field name="dependency_holder" attrs="{'readonly': [('state', '!=', 'draft')]}" required="context.get('from_fund_view',False)" invisible="not context.get('from_fund_view',False)"/>
                                <field name="responsible_user_id" attrs="{'readonly': [('state', '!=', 'draft')]}" required="context.get('from_fund_view',False)" invisible="not context.get('from_fund_view',False)"/>
                                <field name="origin_resource_id" attrs="{'readonly': [('state', '!=', 'draft')]}"
                                       domain="[('is_it_enabled_for_agreement', '=',  True)]" required="1"/>
                               
                                <field name="bank_id" context="{'from_agreement':True}" attrs="{'readonly': [('state', '!=', 'draft')]}" required="context.get('from_fund_view',False)" invisible="not context.get('from_fund_view',False)"/>
                                <field name="account_number"  required="context.get('from_fund_view',False)" invisible="not context.get('from_fund_view',False)"/>
                                <field name="request_office" attrs="{'readonly': [('state', '!=', 'draft')]}" required="context.get('from_fund_view',False)" invisible="not context.get('from_fund_view',False)"/>
                            </group>
                            <group>
                                <field name="apply_to_basis_collaboration" context="{'from_agreement':True}"  attrs="{'readonly': [('state', '!=', 'draft')]}" invisible="context.get('from_fund_view',False)"/>
								                                
                                <field name="origin_journal_id" domain="[('type','=','bank')]" attrs="{'required':[('trust_id','!=',False)],'invisible':[('trust_id','=',False)],'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="destination_journal_id" domain="[('type','=','bank')]" attrs="{'required':[('trust_id','!=',False)],'invisible':[('trust_id','=',False)],'readonly': [('state', '!=', 'draft')]}"/>
                                
                                <field name="permanent_instructions" attrs="{'readonly': [('state', '!=', 'draft')]}"  required="context.get('from_fund_view',False)" invisible="not context.get('from_fund_view',False)"/>
                                <field name="fund_observation" attrs="{'readonly': [('state', '!=', 'draft')]}"  required="context.get('from_fund_view',False)" invisible="not context.get('from_fund_view',False)"/>
                                
                            </group>
                        </group>
                        <group>
                            <field name="reason_rejection" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                            
                        </group>
                        <notebook>
                            <page string="Operation" name="operation">
                                <group>
                                    <group>
                                        <field name="request_date" attrs="{'readonly': [('state', '!=', 'draft')]}" required="1"/>
                                        <field name="trade_number" attrs="{'readonly': [('state', '!=', 'draft')]}" required="1"/>
                                        <field name="opening_balance" attrs="{'readonly': [('state', '!=', 'draft')]}" required="1"/>
                                    </group>
                                    <group>
                                        <field name="observations" attrs="{'readonly': [('state', '!=', 'draft')]}" required="1"/>
                                        <field name="user_id" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                    </group>
                                </group>
                            </page>
                             <page string="Supporting Documentaion" name="supporting_documentation" attrs="{'invisible': ['|',('trust_id', '!=', False),('patrimonial_id', '!=', False)]}">
                                <group attrs="{'invisible': [('type_of_operation', 'in', ('withdrawal', 'increase', 'retirement', 'withdrawal_cancellation'))]}">
                                    <group>
                                        <field name="cbc_format" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                    </group>
                                    <group>
                                        <field name="cbc_shipping_office"
                                               attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                    </group>
                                </group>
                                  <group attrs="{'invisible': [('type_of_operation', 'not in', ('withdrawal', 'increase', 'retirement', 'withdrawal_cancellation'))]}">
                                    <group>
                                        <field name="supporting_documentation"
                                               attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                    </group>
                                </group>
                            </page>

                             <page string="Supporting Documentaion" name="supporting_documentation" attrs="{'invisible': [('trust_id', '=', False),('patrimonial_id', '=', False)]}">
                        		<group>
                        			<group>
                        				<field name="trust_agreement_file_name" invisible="1"/>
                        				<field name="trust_agreement_file" filename="trust_agreement_file_name" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                        			</group>
                        			<group>
                        				<field name="trust_office_file_name" invisible="1"/>
                        				<field name="trust_office_file" filename="trust_office_file_name" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                        			</group>
                        		</group>
                            </page>
                            
                             <page string="Accounts" name="accounts">
                                <group>
                                    <group>
                                    	<field name="patrimonial_equity_account_id" attrs="{'invisible': [('patrimonial_id', '=', False)],'readonly': [('state', '!=', 'draft')]}"/>
                                    	
                                        <field name="liability_account_id"
                                               attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                        <field name="investment_account_id"
                                               attrs="{'invisible': [('patrimonial_id', '!=', False)],'readonly': [('state', '!=', 'draft')]}"/>
                                               
                                        <field name="patrimonial_account_id" attrs="{'invisible': [('trust_id', '=', False)],'readonly': [('state', '!=', 'draft')]}"/>
                                    </group>
                                    <group>
                                        <field name="interest_account_id"
                                               attrs="{'invisible': ['|',('patrimonial_id', '!=', False),('trust_id', '!=', False)],'readonly': [('state', '!=', 'draft')]}"/>
                                        <field name="availability_account_id"
                                               attrs="{'invisible': [('patrimonial_id', '!=', False)],'readonly': [('state', '!=', 'draft')]}"/>
                                               
                                        <field name="patrimonial_yield_account_id" attrs="{'invisible': [('patrimonial_id', '=', False)],'readonly': [('state', '!=', 'draft')]}"/>

                        				<field name="honorary_account_id" attrs="{'invisible': [('trust_id', '=', False)],'readonly': [('state', '!=', 'draft')]}"/>
                        				<field name="availability_account_id" attrs="{'invisible': [('trust_id', '=', False)],'readonly': [('state', '!=', 'draft')]}"/>
                                        
                                    </group>
                                </group>
                            </page>
                            
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>
    	
	</data>
</odoo>