<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
    
    	<record id="inherited_view_account_payment_tree" model="ir.ui.view">
            <field name="name">Inherited view account payment tree</field>
            <field name="model">account.payment</field>
            <field name="mode">primary</field>
            <field name="priority">100</field>
            <field name="inherit_id" ref="account.view_account_payment_tree"/>
            <field name="arch" type="xml">
                <field name="state" position="before">
            		<field name="payment_state"/>
            	</field>
            	<field name="state" position="attributes">
            		<attribute name='invisible'>1</attribute>
            	</field>
            </field>
        </record>
  		<record id="inherited_view_account_payment_form" model="ir.ui.view">
            <field name="name">Inherited view account payment form</field>
            <field name="model">account.payment</field>
            <field name="priority">100</field>
            <field name="mode">primary</field>
            <field name="inherit_id" ref="account.view_account_payment_form"/>
            <field name="arch" type="xml">
            	<xpath expr="//header/button[@name='post']" position="before">
            		<button name="action_validate_payment_procedure" string="Validate" type="object" class="oe_highlight" attrs="{'invisible': [('payment_state', '!=', 'draft')]}"/>
            	</xpath>
            	<xpath expr="//header/button[@name='action_draft']" position="after">
            		<button name="action_reschedule_payment_procedure" string="Reschedule" type="object" class="oe_highlight" attrs="{'invisible': [('payment_state', '!=', 'rejected')]}"/>
            	</xpath>
            	<xpath expr="//div[@class='oe_title']" position="attributes">
            		<attribute name='attrs'>{'invisible': [('payment_state', '=', 'draft')]}</attribute>
            	</xpath>
            	<xpath expr="//header/button[@name='post']" position="attributes">
            		<attribute name="attrs">{'invisible':[('payment_state','!=','for_payment_procedure')]}</attribute>
            		<attribute name="states"></attribute>
            	</xpath>
            	<field name="payment_date" position="before">
            		<field name="payment_request_id" readonly="1"  context="{'form_view_ref': 'jt_supplier_payment.payment_req_form_view'}"/>
            	</field>
            	<field name="partner_bank_account_id" position="attributes">
            		<attribute name="invisible">1</attribute>
            		<attribute name="attrs">{}</attribute>
            	</field>
            	<field name="state" position="before">
            		<field name="payment_state" widget="statusbar"/>
            	</field>
            	<field name="state" position="attributes">
            		<attribute name='invisible'>1</attribute>
            	</field>
            	<field name="communication" position="after">
            		<field name="payment_bank_id"/>
            		<field name="payment_bank_account_id"/>
            	</field>
            	<field name="journal_id" position="after">
            		<field name="payment_issuing_bank_acc_id"/>
            		<field name="batch_folio"/>
            		<field name="folio"/>
            		<field name="reason_for_rejection" readonly="1" attrs="{'invisible':[('payment_state','!=','rejected')]}"/>
            		<field name="reason_for_cancel" readonly="1" attrs="{'invisible':[('payment_state','!=','cancelled')]}"/>
            	</field>
	            <xpath expr="//sheet/group[1]" position="after">
	            	<notebook>
	            		<page string="Banamex" name="banamex">
	            			<group>
	            				<field name="banamex_description"/>
	            				<field name="banamex_concept"/>
	            				<field name="banamex_reference"/>
	            			</group>
	            		</page>
	            		<page string="BBVA Bancomer Net Cash" name="bbva_net_cash">
	            			<group>
	            				<field name="net_cash_reference"/>
	            				<field name="net_cash_availability"/>
	            			</group>
	            		</page>
	            		<page string="BBVA Bancomer SIT" name="bbva_sit">
	            			<group>
	            				<field name="sit_file_key"/>
	            				<field name="sit_operation_code"/>
	            				<field name="sit_reference" attrs="{'invisible':[('sit_operation_code','!=','payment_interbank')],'required':[('sit_operation_code','=','payment_interbank')]}"/>
	            				<field name="sit_reason_for_payment" attrs="{'invisible':[('sit_operation_code','!=','payment_interbank')],'required':[('sit_operation_code','=','payment_interbank')]}"/>
	            				<field name="sit_additional_data"/>
	            			</group>
	            		</page>
	            		<page string="HSBC" name="hsbc">
	            			<group>
	            				<field name="hsbc_reference"/>
	            			</group>
	            		</page>
	            		<page string="Santander" name="santander">
	            			<group>
	            				<field name="santander_payment_concept"/>
	            			</group>
	            		</page>
	            		<page string="JP Morgan" name="jp_morgan">
	            			<group>
	            				<group>
	            					<field name="jp_method"/>
	            					<field name="jp_bank_transfer"/>
	            					<field name="jp_id_type"/>
	            					<field name="jp_id_type_beneficiary_bank"/>
	            					<field name="jp_charges"/>
	            				</group>
	            				<group>
	            					<field name="jp_drawdown_type"/>
	            				</group>
	            			</group>
	            		</page>
	            	</notebook>
	            </xpath>
			</field>
		</record>

  		<record id="inherited_view_account_payment_search" model="ir.ui.view">
            <field name="name">Inherited View Account Payment Search</field>
            <field name="model">account.payment</field>
            <field name="priority">100</field>
            <field name="mode">primary</field>
            <field name="inherit_id" ref="account.view_account_payment_search"/>
            <field name="arch" type="xml">
            	<xpath expr="//filter[@name='state_draft']" position="after">
            		<filter string="Draft" name="payment_state_draft" domain="[('payment_state', '=', 'draft')]"/>
            		<filter string="For Payment Procedure" name="payment_state_proce" domain="[('payment_state', '=', 'for_payment_procedure')]"/>
            		<filter string="Validated" name="payment_state_posted" domain="[('payment_state', '=', 'posted')]"/>
            		<filter string="Reconciled" name="payment_state_reconciled" domain="[('payment_state', '=', 'reconciled')]"/>
            		<filter string="Rejected" name="payment_state_rejected" domain="[('payment_state', '=', 'rejected')]"/>
            		<filter string="Cancelled" name="payment_state_cancelled" domain="[('payment_state', '=', 'cancelled')]"/>
            	</xpath>
            	<xpath expr="//filter[@name='state_draft']" position="attributes">
            		<attribute name='invisible'>1</attribute>
            	</xpath>
            	<xpath expr="//filter[@name='state_posted']" position="attributes">
            		<attribute name='invisible'>1</attribute>
            	</xpath>
            	<xpath expr="//filter[@name='state_sent']" position="attributes">
            		<attribute name='invisible'>1</attribute>
            	</xpath>
            	<xpath expr="//filter[@name='reconciled']" position="attributes">
            		<attribute name='invisible'>1</attribute>
            	</xpath>

            	<xpath expr="//filter[@name='state']" position="after">
            		<filter string="Status" name="payment_state" domain="[]" context="{'group_by': 'payment_state'}"/>
            		<filter string="Bank of receipt of payment" name="payment_bank_id" domain="[]" context="{'group_by': 'payment_bank_id'}"/>
            		<filter string="Payment Receipt bank account" name="payment_bank_account_id" domain="[]" context="{'group_by': 'payment_bank_account_id'}"/>
            		<filter string="Payment issuing bank Account" name="payment_issuing_bank_acc_id" domain="[]" context="{'group_by': 'payment_issuing_bank_acc_id'}"/>
            	</xpath>
            	<xpath expr="//filter[@name='state']" position="attributes">
            		<attribute name='invisible'>1</attribute>
            	</xpath>
            	
			</field>
		</record>
	  <record id="supplier_payment_account_action" model="ir.actions.act_window">
            <field name="name">Payments</field>
            <field name="res_model">account.payment</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="inherited_view_account_payment_search"/>
            <field name="context">{'default_payment_type': 'outbound','default_partner_type': 
            	'supplier','search_default_outbound_filter': 1,
            	'res_partner_search_mode': 'supplier','search_default_journal': 1}
            </field>
        </record>

		<record id="payment_req_tree_action_suppliers_finance" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="inherited_view_account_payment_tree"/>
            <field name="act_window_id" ref="supplier_payment_account_action"/>
        </record>
        <record id="payment_req_form_action_suppliers_finance" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="inherited_view_account_payment_form"/>
            <field name="act_window_id" ref="supplier_payment_account_action"/>
        </record>
        <menuitem id="supplier_account_payment_req" name="Payments"
                  action="supplier_payment_account_action"
                  parent="supplier_payment_management_menu" sequence="20"/>
    
	</data>
</odoo>
